@{
    ViewBag.Title = "Home Page";
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <title>闪算训练平台</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0, minimum-scale=1, maximum-scale=1">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="x-rim-auto-match" content="none">
    <meta name="applicable-device" content="mobile">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_925002_d0uys2bm6e.css" />
    <script src="http://at.alicdn.com/t/font_925002_d0uys2bm6e.js"></script>
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="~/Scripts/baidu_tts_cors.js"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }

        body {
            background-color: #12285e;
        }

        .icon {
            width: 1em;
            height: 1em;
            vertical-align: -0.15em;
            fill: currentColor;
            overflow: hidden;
        }

        .pagepanel {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            display: -webkit-flex;
            display: flex;
            -webkit-flex-direction: column;
            flex-direction: column;
            background-color: transparent;
        }

        .topbar {
            -webkit-flex: 2;
            flex: 2;
            display: -webkit-flex;
            display: flex;
            background-color: transparent;
        }

        .toptext {
            margin: auto;
            font-size: 3rem;
            font-family: "幼圆";
            color: #fff;
        }

        .sysicon {
            font-size: 2.7rem;
            margin-right: 0.5rem;
            padding: 5px;
            border: 1px solid #fff;
            border-radius: 50px;
            color: #fff;
        }

        .middlecontent {
            -webkit-flex: 7;
            flex: 7;
            display: -webkit-flex;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .middletop {
            flex: 6;
            display: -webkit-flex;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .middlebottom {
            flex: 4;
            display: -webkit-flex;
            display: flex;
            flex-direction: column;
        }

        .btitem {
            flex: 1;
            align-items: center;
            display: -webkit-flex;
            display: flex;
        }

        .mybt {
            min-height: 2.6rem;
            text-align: center;
            height: 70%;
            width: 92%;
            margin: auto;
            display: -webkit-flex;
            display: flex;
            border-radius: 5px;
            border: 1px solid #fff;
            box-shadow: #fff 0px 0px 8px inset;
            /*background-color: #f90303;*/
        }

        .bttext {
            margin: auto;
            color: #fff;
            font-size: 1.2rem;
            font-weight: 400;
            letter-spacing: 3px
        }

        .showpanel {
            width: 92%;
            margin: auto;
            flex: 1;
            display: -webkit-flex;
            display: flex;
        }

        .showtoppanel {
            text-align: center;
            color: #fff;
            flex: 1;
            font-size: 4.1rem;
        }
        /*参数配置*/
        .configpanel {
            position: absolute;
            top: 0;
            /*left: 3%;*/
            /*width: 94%;*/
            width: 100%;
            height: 100%;
            z-index: 555;
            background-color: #fff;
            display: -webkit-flex;
            display: flex;
            flex-direction: column;
        }

        .configitem_top {
            flex: 1;
            display: -webkit-flex;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #e5e5e5;
        }

        .configitem {
            flex: 1;
            display: -webkit-flex;
            display: flex;
            border-bottom: 1px solid #ccc;
        }

        .configitem_sub1 {
            flex: 2;
            display: -webkit-flex;
            display: flex;
            justify-content: flex-start;
            align-items: center;
        }

        .configitem_sub2 {
            flex: 7;
            display: -webkit-flex;
            display: flex;
            justify-content: flex-start;
            align-items: center;
        }

        .configitem_sub3 {
            flex: 1;
            display: -webkit-flex;
            display: flex;
            justify-content: flex-end;
            align-items: center;
        }

        .cofigitemsubtext1 {
            padding-left: 10px;
        }

        .cofigitemsubtext2 {
            margin: auto;
        }

        .cofigitemsubtext3 {
            padding-right: 10px;
        }

        .configitem_foot {
            flex: 1.5;
            display: -webkit-flex;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .bt_start {
            min-height: 2.5rem;
            margin: auto;
            text-align: center;
            height: 70%;
            width: 92%;
            margin: auto;
            border-radius: 5px;
            display: -webkit-flex;
            display: flex;
            background-color: #12285e;
            min-height: 2.7rem;
        }

        .bt_starttext {
            margin: auto;
            color: #fff;
            font-size: 1.2rem;
            font-weight: 400;
            letter-spacing: 3px
        }

        .footbar {
            -webkit-flex: 1;
            display: -webkit-flex;
            display: flex;
            background-color: transparent;
        }

        .foottext {
            margin: auto;
            font-size: 0.7rem;
            font-family: "幼圆";
            color: #fff;
            text-align: center;
        }

        .copyright {
            margin-top: 0.2rem;
        }

        .jiantou {
            color: #ccc;
        }

        .configfont {
            color: #b59f9f;
        }

        .btyuyin {
            width: 4rem;
            height: 1.8rem;
            min-height: 1.8rem;
            border-radius: 50px;
            background-color: #e5e5e5;
            position: relative;
            border: 1px solid #ccc;
        }

        .btyxswich {
            position: absolute;
            top: 0;
            left: 1rem;
            height: 1.8rem;
            width: 3rem;
            background: #4fb121;
            border-radius: 50px;
            background-color: #3ec400;
        }

        .zhezhaopanel {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 556;
            background-color: #272424;
            opacity: 0.2;
            display: none;
        }

        .zhezhaopanelsub {
            position: absolute;
            bottom: -500px;
            left: 0;
            z-index: 557;
            background-color: #fff;
            width: 100%;
            height: 48%;
            /*display: -webkit-flex;
            display: flex;*/
            flex-direction: column;
            display: none;
            border-radius: 10px 10px 0 0;
        }

        .zhezhaopanelsubtitle {
            flex: 1.2;
            background-color: #e5e5e5;
            display: -webkit-flex;
            display: flex;
            align-items: center;
            border-radius: 10px 10px 0 0;
            background: -webkit-linear-gradient(left top, red, blue);
            background: -o-linear-gradient(bottom right, red, blue);
            background: -moz-linear-gradient(bottom right, red, blue);
            background: linear-gradient(to bottom, #12285e, #192345);
        }

        .zhezhaopanelsubtitle_left {
            flex: 6;
            padding-left: 10px;
            color: #fff;
        }

        .zhezhaopanelsubtitle_right {
            flex: 1;
            text-align: center;
            color: #fff;
        }

        .zhezhaopanelsubbody {
            flex: 6;
            overflow-y: auto;
        }
        .configitemcontent {
            width: 100%;
            height: 3rem;
            line-height: 3rem;
            text-align: left;
            border-bottom: 1px solid #ccc;
            display: -webkit-flex;
            display: flex;
            align-items:center;
        }
        .configitemcontentleft {
            flex:9;
            text-align:left;
            padding-left:10px;
        }
        .configitemcontentright {
            flex: 1;
            text-align: right;
            padding-right:10px;
        }
        .duihao{
            color:#3ec400;
            font-size:2rem;
        }
        .mytitletext{
            letter-spacing:5px;
        }
    </style>
    <script>
        // 初始化变量
        var audio = null;
        var playBtn = null;
        $(document).ready(function () {
            _global_pagezxsobj.init();
        });
        var _global_pagezxsobj = {
            _pagewidth: 0,
            _pageheight: 0,
            _globalguizeid: "",
            _globalconfigpara: null,
            _globalflag: false,
            gflag: {
                maxweishu: 1,
                firstweishu: 1,
                endweishu: 1,
                countnum: 2
            },
            gstaticdata: {
                data_tiku: [{ "随机生成": "1" }, { "随机题库": "2" }],
                data_yuyin: [{ "开启": "1" }, { "关闭": "2" }],
                data_yusheng: [{ "女声": "1" }, { "男声": "2" }],
                data_yusu: [{ "慢速": "2" }, { "正常": "5" }, { "快速": "10" }],
                data_guize: [{ "加法": "1" }, { "加减法": "2" }, { "乘法": "3" }, { "除法": "4" }],
                data_bishu: [
                    { "2笔": 2 },
                    { "3笔": 3 },
                    { "4笔": 4},
                    { "5笔": 5 },
                    { "6笔": 6 },
                    { "7笔": 7 },
                    { "8笔": 8 },
                    { "9笔": 9 },
                    { "10笔": 10 },
                    { "15笔": 15 },
                    { "20笔": 20 },
                ],
                data_weishu: [
                    { "1位": 1 },
                    { "2位": 2 },
                    { "3位": 3 },
                    { "4位": 4 },
                    { "5位": 5 },
                    { "6位": 6 },
                    { "7位": 7 },
                    { "8位": 8 },
                    { "9位": 9 }
                ],
                data_shijian1: [
                    { "1秒": 1 },
                    { "2秒": 2 },
                    { "3秒": 3 },
                    { "4秒": 4 },
                    { "5秒": 5 },
                    { "6秒": 6 },
                    { "7秒": 7 }
                ],
                data_shouweishu: [
                    { "2位": 2 },
                    { "3位": 3 },
                    { "4位": 4 },
                    { "5位": 5 },
                    { "6位": 6 },
                    { "7位": 7 }
                ],
                data_moweishu: [
                    { "1位": 1 },
                    { "2位": 2 },
                    { "3位": 3 },
                    { "4位": 4 },
                    { "5位": 5 },
                    { "6位": 6 }
                ]
            },
            getrandomnum: function (min, max) {
                max = max + 1;
                var w = max - min;
                return parseInt(Math.random() * w + min, 10);
            },
            init: function () {
                this.initdata();
                this.inithtml();
            },
            initdata: function () {
                this._pagewidth = parseInt($(window).outerWidth(true), 10);
                this._pageheight = parseInt($(window).outerHeight(true), 10);
            },
            inithtml: function () {
                var _pagepanelhtm = $("<div class='pagepanel'></div>");
                _pagepanelhtm.css({ "height": this._pageheight + "px" });

                var _topbarhtm = $("<div class='topbar'><div class='toptext'><i class='zxsiconfont zxsicon-education sysicon'></i><span class='mytitletext'>闪算训练</span></div></div>");
                _pagepanelhtm.append(_topbarhtm);

                var _middlecontenthtm = $("<div class='middlecontent'></div>");
                var _middletophtm = $("<div class='middletop'></div>");
                var _showpaneltophtm = $("<div class='showpanel'></div>");
                var _showpaneltoptext = $("<div class='showtoppanel'>N/A</div>");
                _showpaneltophtm.append(_showpaneltoptext);

                var _showpanelmiddelhtm = $("<div class='showpanel'></div>");
                var _showpaneltoptext2 = $("<div class='showtoppanel'>N/A</div>");
                _showpanelmiddelhtm.append(_showpaneltoptext2);

                var _showpanelfoothtm = $("<div class='showpanel'></div>");
                var _showpaneltoptext3 = $("<div class='showtoppanel'>N/A</div>");
                _showpanelfoothtm.append(_showpaneltoptext3);

                _middletophtm.append(_showpaneltophtm);
                _middletophtm.append(_showpanelmiddelhtm);
                _middletophtm.append(_showpanelfoothtm);
                _middlecontenthtm.append(_middletophtm);
                var _middlebottomhtm = $("<div class='middlebottom'></div>");
                var _asked = $("<div id='bt_ckda' class='btitem'><div class='mybt'><div class='bttext'>查看答案</div></div></div>");
                var _resetconfig = $("<div id='bt_reset' class='btitem'><div class='mybt'><div class='bttext'>重置配置</div></div></div>");
                var _nextlx = $("<div id='bt_next' class='btitem'><div class='mybt'><div class='bttext'>继续答题</div></div></div>");
                _middlebottomhtm.append(_asked);
                _middlebottomhtm.append(_resetconfig);
                _middlebottomhtm.append(_nextlx);

                _middlecontenthtm.append(_middlebottomhtm);
                //设置配置层
                _configpanel = $("<div id='configpanel' class=\"configpanel\"></div>");
                //_configitem_top = $("<div class=\"configitem_top\"><div>参数设置</div></div>");
                //_configpanel.append(_configitem_top);
                for (var i = 0; i < 10; i++) {
                    var _configitem = $("<div id='configitem" + i + "' class=\"configitem\"></div>");
                    var _itemsub1 = $("<div class=\"configitem_sub1\"><div class='cofigitemsubtext1'>题库</div></div>");
                    var _itemsub2 = $("<div class=\"configitem_sub2\"></div>");
                    var _itemsub3 = $("<div class=\"configitem_sub3\"><div class='cofigitemsubtext3'><i class='zxsiconfont zxsicon-iconfontjiantou jiantou'></i></div></div>");
                    var _mytempcontaner = "";
                    var _gstyle = false;
                    switch (i) {
                        case 0:
                            _itemsub1.find("div").text("题库");
                            _mytempcontaner = $("<div class='configfont' cvalue='1'>随机生成</div>");
                            _itemsub2.append(_mytempcontaner);
                            break;
                        case 1:
                            _itemsub1.find("div").text("语音");
                            _mytempcontaner = $("<div class='configfont btyuyin'><div class='btyxswich' flag='1' id='btyxswich'></div></div>");
                            _itemsub2.append(_mytempcontaner);
                            _itemsub3.find("div").html("");
                            break;
                        case 2:
                            _itemsub1.find("div").text("语声");
                            _mytempcontaner = $("<div id='configyusheng' class='configfont' cvalue='1'>女声</div>");
                            _itemsub2.append(_mytempcontaner);
                            break;
                        case 3:
                            _itemsub1.find("div").text("语速");
                            _mytempcontaner = $("<div id='configyusu' cvalue='5' class='configfont' onclick='_global_pagezxsobj.showzhezhao();'>正常</div>");
                            _itemsub2.append(_mytempcontaner);
                            break;
                        case 4:
                            _itemsub1.find("div").text("规则");
                            _mytempcontaner = $("<div id='configguize' cvalue='1' class='configfont'>加法</div>");
                            _itemsub2.append(_mytempcontaner);
                            break;
                        case 5:
                            _itemsub1.find("div").text("笔数");
                            _mytempcontaner = $("<div id='configbishu'  cvalue='2' class='configfont'>2笔</div>");
                            _itemsub2.append(_mytempcontaner);
                            break;
                        case 6:
                            _itemsub1.find("div").text("位数");
                            _mytempcontaner = $("<div id='configweishu' cvalue='1' class='configfont'>1位</div>");
                            _itemsub2.append(_mytempcontaner);
                            break;
                        case 7:
                            _itemsub1.find("div").text("首位数");
                            _mytempcontaner = $("<div id='configshouweishu' cvalue='2' class='configfont'>2笔</div>");
                            _itemsub2.append(_mytempcontaner);
                            _gstyle = true;
                            break;
                        case 8:
                            _itemsub1.find("div").text("末位数");
                            _mytempcontaner = $("<div id='configmoweishu' cvalue='1' class='configfont'>1位</div>");
                            _itemsub2.append(_mytempcontaner);
                            _gstyle = true;
                            break;
                        case 9:
                            _itemsub1.find("div").text("时间");
                            _mytempcontaner = $("<div id='configshijian' cvalue='1' class='configfont'>1秒</div>");
                            _itemsub2.append(_mytempcontaner);
                            break;
                    }
                    _configitem.append(_itemsub1);
                    _configitem.append(_itemsub2);
                    _configitem.append(_itemsub3);
                    if (_gstyle) {
                        _configitem.css({"display":"none"});
                    }
                    _configpanel.append(_configitem);
                }
                _configitem_foot = $("<div class=\"configitem_foot\"></div>");
                _btstatrxunlian = $("<div id='bt_start' class=\"bt_start\"><div class='bt_starttext'>开始训练</div></div>");
                _configitem_foot.append(_btstatrxunlian);
                _configpanel.append(_configitem_foot);
                _middlecontenthtm.append(_configpanel);
                _pagepanelhtm.append(_middlecontenthtm);

                var _footbarhtm = $("<div class='footbar'><div class='foottext'>更高 更快  更强<br/><div class='copyright'>copyright (c) 2018-2019</div></div></div>");
                _pagepanelhtm.append(_footbarhtm);

                $("body").append(_pagepanelhtm);

                //遮罩
                var _zhezhaopanel = $("<div class='zhezhaopanel' id='zhezhaopanel'></div>");
                var _zhezhaopanelsub = $("<div class='zhezhaopanelsub' id='zhezhaopanelsub'></div>");
                var _zhezhaopanelsubtitle = $("<div class='zhezhaopanelsubtitle'></div>");
                var _zhezhaopanelsubtitle_left = $("<div class='zhezhaopanelsubtitle_left'>选择部署</div>");
                var _zhezhaopanelsubtitle_right = $("<div class='zhezhaopanelsubtitle_right' id='btclose'>关闭</div>");
                _zhezhaopanelsubtitle.append(_zhezhaopanelsubtitle_left);
                _zhezhaopanelsubtitle.append(_zhezhaopanelsubtitle_right);

                var _zhezhaopanelsubbody = $("<div class='zhezhaopanelsubbody'></div>");
                _zhezhaopanelsub.append(_zhezhaopanelsubtitle);
                _zhezhaopanelsub.append(_zhezhaopanelsubbody);
                $("body").append(_zhezhaopanel);
                $("body").append(_zhezhaopanelsub);
                this.initbtevent();
            },
            initbtevent: function () {
                $("#bt_start").on("click", function () {
                    if (_global_pagezxsobj._globalflag) {
                        return;
                    }
                    _global_pagezxsobj._globalflag = true;
                    $(".bttext").css({ "color":"#5d6564"});
                    $(".showtoppanel").html("");
                    _global_pagezxsobj.gcountnum = 0;
                    _global_pagezxsobj.glistnum = [];
                    _global_pagezxsobj._globalconfigpara = _global_pagezxsobj.getconfigparameterobj();

                    if (_global_pagezxsobj._globalconfigpara.yuyin == "0") {
                        switch (_global_pagezxsobj._globalconfigpara.guize) {
                            case "1":
                                _global_pagezxsobj.jiafaonlyview();
                                break;
                            case "2":
                                _global_pagezxsobj.jiajianfaonlyview();
                                break;
                            case "3":
                                _global_pagezxsobj.chengfaonlyview();
                                break;
                            case "4":
                                alert("除法...开发中...");
                                _global_pagezxsobj._globalflag = false;
                                return;
                                break;
                        }
                    } else {
                        switch (_global_pagezxsobj._globalconfigpara.guize) {
                            case "1":
                                _global_pagezxsobj.jiafa();
                                break;
                            case "2":
                                _global_pagezxsobj.jiajianfa();
                                break;
                            case "3": 
                                _global_pagezxsobj.chengfa();
                                break;
                            case "4":
                                alert("除法...开发中...");
                                _global_pagezxsobj._globalflag = false;
                                return;
                                break;
                        }
                    }
                    $("#configpanel").hide();
                });

                $("#bt_ckda").on("click", function () {
                    if (_global_pagezxsobj._globalflag) {
                        console.log("没有完成！");
                        return;
                    }
                    _global_pagezxsobj._globalflag = true;
                    var _glistnum = _global_pagezxsobj.glistnum;
                    var allnum = 0;
                    switch (_global_pagezxsobj._globalconfigpara.guize) {
                        case "1":
                        case "2":
                            for (var i = 0; i < _glistnum.length; i++) {
                                allnum += _glistnum[i];
                            }
                            break;
                        case "3":
                            allnum = 1;
                            for (var i = 0; i < _glistnum.length; i++) {
                                allnum = allnum*_glistnum[i];
                            }
                            break;
                        case "4":
                            alert("除法...开发中...");
                            return;
                            break;
                    }
                    
                    $(".showtoppanel").eq(1).html(allnum);
                    if (("" + allnum).length > 9) {
                        $(".showtoppanel").eq(1).css({ "font-size": "3rem" });
                    } else {
                        $(".showtoppanel").eq(1).css({ "font-size": "4.1rem" });
                    }
                    if (_global_pagezxsobj._globalconfigpara.yuyin == "1") {
                        _global_pagezxsobj.tts("答案：" + ("" + allnum).replace("-", "负"), null,true);
                    }
                    _global_pagezxsobj._globalflag = false;
                });
                $("#bt_reset").on("click", function () {
                    if (_global_pagezxsobj._globalflag) {
                        console.log("没有完成！");
                        return;
                    }
                    $("#configpanel").show();
                    _global_pagezxsobj.gcountnum = 0;
                    _global_pagezxsobj.glistnum = [];
                });
                $("#bt_next").on("click", function () {
                    if (_global_pagezxsobj._globalflag) {
                        console.log("没有完成！");
                        return;
                    }
                    $("#bt_start").trigger("click");
                });
                $("#btyxswich").on("click", function (ev) {
                    var oEvent = ev || event;
                    //js阻止事件冒泡
                    oEvent.cancelBubble = true;
                    oEvent.stopPropagation();

                    //js阻止链接默认行为，没有停止冒泡
                    //oEvent.preventDefault();
                    //return false;
                    if ($(this).attr("flag") == "1") {
                        $(this).attr("flag", "0");
                        $(this).css({ "background": "#fff" });
                        $(this).animate({ "left": "0" }, 200);
                        //隐藏语声和语速
                        $("#configitem2").hide();
                        $("#configitem3").hide();
                    } else {
                        $(this).attr("flag", "1");
                        $(this).css({ "background": "#3ec400" });
                        $(this).animate({ "left": "1rem" }, 200);
                        //显示语声和语速
                        $("#configitem2").show();
                        $("#configitem3").show();
                    }
                });
                $("#zhezhaopanel").on("click", function (ev) {
                    var oEvent = ev || event;
                    //js阻止事件冒泡
                    oEvent.cancelBubble = true;
                    oEvent.stopPropagation();

                    //js阻止链接默认行为，没有停止冒泡
                    //oEvent.preventDefault();
                    //return false;
                    _global_pagezxsobj.closezhezhao();
                });
                $("#btclose").on("click", function () {
                    _global_pagezxsobj.closezhezhao();
                });
                $(".configitem_sub2").on("click", function () {
                    var _this = $(this);
                    if (_this.parent().prop("id") =='configitem1') { return; }
                    var _cvalue = _this.find("div").attr("cvalue");
                    _global_pagezxsobj.initconfigselect(_this.parent().prop("id"), _cvalue);
                });
                $(".configitem_sub3").on("click", function () {
                    var _this = $(this).prev();
                    if (_this.parent().prop("id") == 'configitem1') { return; }
                    var _cvalue = _this.find("div").attr("cvalue");
                    _global_pagezxsobj.initconfigselect(_this.parent().prop("id"),_cvalue);
                });
            },
            showzhezhao: function () {
                console.log("open");
                $("#zhezhaopanelsub").css({ "display": "-webkit-flex", "display": "flex" });
                $("#zhezhaopanel").show();
                $("#zhezhaopanelsub").show();
                $("#zhezhaopanelsub").animate({ "bottom": "0px" }, 300);
            },
            closezhezhao: function () {
                console.log("close");
                $("#zhezhaopanelsub").animate({ "bottom": "-500px" }, 300);
                setTimeout(function () {
                    $("#zhezhaopanelsub").hide();
                    $("#zhezhaopanel").hide();
                }, 301);
            },
            initconfigselect: function (id,cvalue) {
                $(".zhezhaopanelsubbody").html("");
                _global_pagezxsobj._globalguizeid = id;
                switch (id) {
                    case "configitem0":
                        _global_pagezxsobj.initconfig("选择题库", cvalue, _global_pagezxsobj.gstaticdata.data_tiku);
                        break;
                    case "configitem2":
                        _global_pagezxsobj.initconfig("语声切换", cvalue, _global_pagezxsobj.gstaticdata.data_yusheng);
                        break;
                    case "configitem3":
                        _global_pagezxsobj.initconfig("语速切换", cvalue, _global_pagezxsobj.gstaticdata.data_yusu);
                        break;
                    case "configitem4":
                        _global_pagezxsobj.initconfig("规则切换", cvalue, _global_pagezxsobj.gstaticdata.data_guize);
                        break;
                    case "configitem5":
                        _global_pagezxsobj.initconfig("笔数切换", cvalue, _global_pagezxsobj.gstaticdata.data_bishu);
                        break;
                    case "configitem6":
                        _global_pagezxsobj.initconfig("位数切换", cvalue, _global_pagezxsobj.gstaticdata.data_weishu);
                        break;
                    case "configitem7":
                        _global_pagezxsobj.initconfig("首位数切换", cvalue, _global_pagezxsobj.gstaticdata.data_shouweishu);
                        break;
                    case "configitem8":
                        _global_pagezxsobj.initconfig("末位数切换", cvalue, _global_pagezxsobj.gstaticdata.data_moweishu);
                        break;
                    case "configitem9":
                        _global_pagezxsobj.initconfig("时间切换", cvalue, _global_pagezxsobj.gstaticdata.data_shijian1);
                        break;
                }
                $(".configitemcontent").on("click", function () {
                    var myid = $(this).prop("id");
                    $(".configitemcontent").removeAttr("checked");
                    $("#" + myid).attr("checked", true);
                    $(".configitemcontent").find(".configitemcontentright").html("");
                    $("#" + myid).find(".configitemcontentright").eq(0).html("<i class='zxsiconfont zxsicon-duihao7 duihao'></i>");
                    $("#" + id).find(".configfont").html($(this).find(".configitemcontentleft").html());
                    $("#" + id).find(".configfont").attr("cvalue", $(this).find(".configitemcontentleft").attr("vvalue"));
                    //乘法和除法单独处理
                    if ($("#configitem4").find(".configfont").html() == "乘法" || $("#configitem4").find(".configfont").html() == "除法") {
                        $("#configitem5").hide();
                        $("#configitem6").hide();
                        $("#configitem7").show();
                        $("#configitem8").show();
                    } else {
                        $("#configitem5").show();
                        $("#configitem6").show();
                        $("#configitem7").hide();
                        $("#configitem8").hide();
                    }
                    _global_pagezxsobj.closezhezhao();
                });
                _global_pagezxsobj.showzhezhao();
            },
            initconfig: function (title, cvalue,obj) {
                $(".zhezhaopanelsubtitle_left").eq(0).html(title);
                for (var i = 0; i < obj.length; i++) {
                    var _ttobj = obj[i];
                    var _itemtemphtml = $("<div id='' class='configitemcontent'></div>");
                    var _itemtemphtmlsubleft = $("<div class='configitemcontentleft'></div>");
                    var _itemtemphtmlsubright = $("<div class='configitemcontentright'></div>");
                    for (var m in _ttobj) {
                        _itemtemphtmlsubleft.html(m);
                        _itemtemphtml.prop("id", "item_" + _ttobj[m]);
                        _itemtemphtmlsubleft.attr("vvalue", _ttobj[m]);
                        if (cvalue == _ttobj[m]) {
                            _itemtemphtmlsubright.append("<i class='zxsiconfont zxsicon-duihao7 duihao'></i>");
                            _itemtemphtml.attr("checked", true);
                        }

                    }
                    _itemtemphtml.append(_itemtemphtmlsubleft);
                    _itemtemphtml.append(_itemtemphtmlsubright);
                    $(".zhezhaopanelsubbody").append(_itemtemphtml);
                }
            },
            getconfigparameterobj: function () {
                var _obj = {};
                _obj.tiku = $("#configitem0").find(".configfont").attr("cvalue");
                _obj.yuyin = $("#btyxswich").attr("flag");
                _obj.yusheng = $("#configitem2").find(".configfont").attr("cvalue");
                _obj.yusu = $("#configitem3").find(".configfont").attr("cvalue");
                _obj.guize = $("#configitem4").find(".configfont").attr("cvalue");
                _obj.bishu = $("#configitem5").find(".configfont").attr("cvalue");
                _obj.weishu = $("#configitem6").find(".configfont").attr("cvalue");
                _obj.shouweishu = $("#configitem7").find(".configfont").attr("cvalue");
                _obj.moweishu = $("#configitem8").find(".configfont").attr("cvalue");
                _obj.shijian = $("#configitem9").find(".configfont").attr("cvalue");
                return _obj;
            },
            gcountnum: 0,
            glistnum:[],
            jiafa: function () {
                //获得随机数
                var _randobj = _global_pagezxsobj.getrandnum(parseInt(_global_pagezxsobj._globalconfigpara.weishu, 10));
                var _num = _global_pagezxsobj.getrandomnum(_randobj.min, _randobj.max);
                _global_pagezxsobj.glistnum.push(parseInt(_num, 10));
                var _shownum = "";
                if (_global_pagezxsobj.gcountnum % 2 != 0) {
                    _shownum = "<span style='color:yellow;'>" + _num + "</span>";
                } else {
                    _shownum = _num;
                }
                $(".showtoppanel").eq(1).html(_shownum);
                _global_pagezxsobj.tts(_num, _global_pagezxsobj.jiafa);
            },
            jiafaonlyview: function () {
                //获得随机数
                var _randobj = _global_pagezxsobj.getrandnum(parseInt(_global_pagezxsobj._globalconfigpara.weishu, 10));
                var _num = _global_pagezxsobj.getrandomnum(_randobj.min, _randobj.max);
                _global_pagezxsobj.glistnum.push(parseInt(_num, 10));
                var _shownum = "";
                if (_global_pagezxsobj.gcountnum % 2 != 0) {
                    _shownum = "<span style='color:yellow;'>" + _num + "</span>";
                } else {
                    _shownum = _num;
                }
                $(".showtoppanel").eq(1).html(_shownum);
                _global_pagezxsobj.gcountnum++;
                if (_global_pagezxsobj.gcountnum < parseInt(_global_pagezxsobj._globalconfigpara.bishu, 10)) {
                    setTimeout(function () { _global_pagezxsobj.jiafaonlyview(); }, parseInt(_global_pagezxsobj._globalconfigpara.shijian, 10) * 1000);
                } else {
                    setTimeout(function () {
                        $(".showtoppanel").eq(1).html("答案？");
                        _global_pagezxsobj._globalflag = false;
                        $(".bttext").css({ "color": "#fff" });
                    }, parseInt(_global_pagezxsobj._globalconfigpara.shijian, 10) * 1000);
                }
            },
            jiajianfa: function () {
                //获得随机数
                var _randobj = _global_pagezxsobj.getrandnum(parseInt(_global_pagezxsobj._globalconfigpara.weishu, 10));
                var _num = _global_pagezxsobj.getrandomnum(_randobj.min, _randobj.max);
                var tv = _global_pagezxsobj.getrandomnum(0, 9);
                var tflag = "";
                if ((tv == 2) || (tv == 5) || (tv == 7) || (tv == 9)) {
                    tflag = "-";
                }
                _num = parseInt((tflag + _num), 10);
                _global_pagezxsobj.glistnum.push(parseInt(_num, 10));
                var _shownum = "";
                if (_global_pagezxsobj.gcountnum % 2 != 0) {
                    _shownum = "<span style='color:yellow;'>" + _num + "</span>";
                } else {
                    _shownum = _num;
                }
                $(".showtoppanel").eq(1).html(_shownum);
                _global_pagezxsobj.tts((""+_num).replace("-","负"), _global_pagezxsobj.jiajianfa);
            },
            jiajianfaonlyview: function () {
                //获得随机数
                var _randobj = _global_pagezxsobj.getrandnum(parseInt(_global_pagezxsobj._globalconfigpara.weishu, 10));
                var _num = _global_pagezxsobj.getrandomnum(_randobj.min, _randobj.max);
                var tv = _global_pagezxsobj.getrandomnum(0, 9);
                var tflag = "";
                if ((tv == 2) || (tv == 5) || (tv == 7) || (tv == 9)) {
                    tflag = "-";
                }
                _num = parseInt((tflag + _num), 10);
                _global_pagezxsobj.glistnum.push(parseInt(_num, 10));
                var _shownum = "";
                if (_global_pagezxsobj.gcountnum % 2 != 0) {
                    _shownum = "<span style='color:yellow;'>" + _num + "</span>";
                } else {
                    _shownum = _num;
                }
                $(".showtoppanel").eq(1).html(_shownum);
                _global_pagezxsobj.gcountnum++;
                if (_global_pagezxsobj.gcountnum < parseInt(_global_pagezxsobj._globalconfigpara.bishu, 10)) {
                    setTimeout(function () { _global_pagezxsobj.jiajianfaonlyview(); }, parseInt(_global_pagezxsobj._globalconfigpara.shijian, 10) * 1000);
                } else {
                    setTimeout(function () {
                        $(".showtoppanel").eq(1).html("答案？");
                        _global_pagezxsobj._globalflag = false;
                        $(".bttext").css({ "color": "#fff" });
                    }, parseInt(_global_pagezxsobj._globalconfigpara.shijian, 10) * 1000);
                }
            },
            chengfa: function () {
                //获得随机数
                var _randobj_begin = _global_pagezxsobj.getrandnum(parseInt(_global_pagezxsobj._globalconfigpara.shouweishu, 10));
                var _num_begin = _global_pagezxsobj.getrandomnum(_randobj_begin.min, _randobj_begin.max);
                var _randobj_end = _global_pagezxsobj.getrandnum(parseInt(_global_pagezxsobj._globalconfigpara.moweishu, 10));
                var _num_end = _global_pagezxsobj.getrandomnum(_randobj_end.min, _randobj_end.max);
                _global_pagezxsobj.glistnum.push(parseInt(_num_begin, 10));
                _global_pagezxsobj.glistnum.push(parseInt(_num_end, 10));
                $(".showtoppanel").eq(0).html(_num_begin);
                $(".showtoppanel").eq(1).html("×");
                $(".showtoppanel").eq(2).html(_num_end);
                _global_pagezxsobj.tts((_num_begin + "乘" + _num_end), null);
            },
            chengfaonlyview: function () {
                //获得随机数
                var _randobj_begin = _global_pagezxsobj.getrandnum(parseInt(_global_pagezxsobj._globalconfigpara.shouweishu, 10));
                var _num_begin = _global_pagezxsobj.getrandomnum(_randobj_begin.min, _randobj_begin.max);
                var _randobj_end = _global_pagezxsobj.getrandnum(parseInt(_global_pagezxsobj._globalconfigpara.moweishu, 10));
                var _num_end = _global_pagezxsobj.getrandomnum(_randobj_end.min, _randobj_end.max);
                _global_pagezxsobj.glistnum.push(parseInt(_num_begin, 10));
                _global_pagezxsobj.glistnum.push(parseInt(_num_end, 10));
                $(".showtoppanel").eq(0).html(_num_begin);
                $(".showtoppanel").eq(1).html("×");
                $(".showtoppanel").eq(2).html(_num_end);
                setTimeout(function () {
                    $(".showtoppanel").html("");
                    $(".showtoppanel").eq(1).html("答案？");
                    _global_pagezxsobj._globalflag = false;
                    $(".bttext").css({ "color": "#fff" });
                }, parseInt(_global_pagezxsobj._globalconfigpara.shijian, 10) * 1000);
            },
            getrandnum: function (type) {
                if (type > 9) {
                    type = 9;
                }
                if (type < 1) {
                    type = 1;
                }
                var min = Math.pow(10, (type - 1));
                var max = Math.pow(10, type);
                return {"min":min,"max":max};
            },
            tts: function (num,func,isviewresult) {
                let text = num;
                //playBtn.innerText = '准备中';
                // 调用语音合成接口
                // 参数含义请参考 https://ai.baidu.com/docs#/TTS-API/41ac79a6
                audio = btts({
                    tex: text,
                    tok: '24.95d1247f1165fb0b5eed036aaa29fc8f.2592000.1545056456.282335-14848118',
                    spd: parseInt(_global_pagezxsobj._globalconfigpara.yusu, 10),
                    pit: 5,
                    vol: 15,
                    per: parseInt(_global_pagezxsobj._globalconfigpara.yusheng,10) - 1
                }, {
                        volume: 0.3,
                        autoDestory: false,
                        timeout: 10000,
                        hidden: true,
                        onInit: function (htmlAudioElement) {

                        },
                        onSuccess: function (htmlAudioElement) {
                            audio = htmlAudioElement;
                            //playBtn.innerText = '播放';
                            //play()；
                            var sdata = new Date();
                            audio.play();
                            audio.addEventListener('ended', function () {
                                console.log("播放完毕：" + (new Date()).getTime(), 'ended');
                                var edata = new Date();
                                console.log("毫秒数：" + (edata - sdata));
                                if (func) {
                                    _global_pagezxsobj.gcountnum++;
                                    var _paradate = parseInt(_global_pagezxsobj._globalconfigpara.shijian, 10) * 1000;
                                    _paradate = (_paradate - (edata - sdata)) > 0 ? (_paradate - (edata - sdata)): 0;
                                    console.log("真实毫秒数：" + _paradate);
                                    if (_global_pagezxsobj.gcountnum < parseInt(_global_pagezxsobj._globalconfigpara.bishu, 10)) {
                                        setTimeout(function () { func(); }, _paradate);
                                    } else {
                                        setTimeout(function () {
                                            $(".showtoppanel").eq(1).html("答案？");
                                            _global_pagezxsobj._globalflag = false;
                                            $(".bttext").css({ "color": "#fff" });
                                        }, _paradate);
                                    }
                                } else {
                                    if (!isviewresult) {
                                        setTimeout(function () {
                                            $(".showtoppanel").html("");
                                            $(".showtoppanel").eq(1).html("答案？");
                                            _global_pagezxsobj._globalflag = false;
                                            $(".bttext").css({ "color": "#fff" });
                                        }, parseInt(_global_pagezxsobj._globalconfigpara.shijian, 10) * 1000);
                                    }
                                }
                            }, false);
                        },
                        onError: function (text) {
                            alert(text);
                            _global_pagezxsobj.gcountnum = 0;
                            _global_pagezxsobj.glistnum = [];
                        },
                        onTimeout: function () {
                            alert('timeout');
                        }
                    });
            }
        };
    </script>
</head>
<body ontouchstart>
</body>
</html>
